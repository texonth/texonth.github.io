(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,a){e.exports=a.p+"static/media/singer.082a7240.jpg"},,,,function(e,t,a){e.exports=a.p+"static/media/bars.58f6fd12.svg"},function(e,t,a){e.exports=a.p+"static/media/demo.e208687c.mp3"},,function(e,t,a){e.exports=a(28)},,,,,,function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(9),r=a.n(o),c=(a(20),a(2)),s=a(3),l=a(5),u=a(4),d=a(6),m=(a(21),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).clickHandler=function(e){var t=e.target.getBoundingClientRect(),n=e.target.offsetWidth,i=e.clientX-t.left;a.props.onTimelineClick(i/n)},a.getMMSSfromS=function(e){var t=~~e;return(t-(t%=60))/60+(9<t?":":":0")+t},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.position/this.props.duration*100,t=this.getMMSSfromS(this.props.position),a=this.getMMSSfromS(this.props.duration);return i.a.createElement("div",{className:"timeline"},i.a.createElement("div",{className:"timeline-inner",style:{transform:"translateX(".concat(e,"%)")}}),i.a.createElement("div",{className:"timeline-over",onClick:this.clickHandler}),i.a.createElement("p",{className:"timeline-time"},"".concat(t,"/").concat(a)))}}]),t}(n.Component)),f=a(13),h=(a(24),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).onDrop=function(e){a.props.onDrop(e[0])},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(f.a,{onDrop:this.onDrop,accept:"audio/*"},function(e){var t=e.getRootProps,a=e.getInputProps;return i.a.createElement("div",t({className:"dropzone"}),i.a.createElement("input",a()),i.a.createElement("p",null,"Drop your music!"))})}}]),t}(n.PureComponent)),g=a(7),p=a.n(g),v=[function e(t){var a=this;Object(c.a)(this,e),this.updateCanvasSizes=function(){a.canvas.width=a.canvas.clientWidth,a.canvas.height=a.canvas.clientHeight,a.WIDTH=a.canvas.width,a.HEIGHT=a.canvas.height,a.needUpdateSizes=!0},this.updateSizes=function(){a.aRatio=a.WIDTH/a.HEIGHT,a.itemsInRow=Math.floor(Math.sqrt(a.aRatio*a.items)),a.rows=Math.floor(a.items/a.itemsInRow),a.radius=a.WIDTH/a.itemsInRow/2,a.needUpdateSizes=!1},this.draw=function(e){var t=e.length;a.needUpdateSizes&&a.updateSizes(),a.ctx.clearRect(0,0,a.WIDTH,a.HEIGHT);for(var n=(t-(a.ignoreOnHigh+a.ignoreOnLow))/a.items,i=a.radius,o=a.HEIGHT-a.radius,r=0,c=a.ignoreOnLow;c<t-a.ignoreOnHigh;c+=n)c=Math.round(c),a.ctx.fillStyle="rgb("+e[c]+",50,"+c/t*355+")",a.ctx.beginPath(),a.ctx.arc(i,o,a.radius*e[c]/256,0,2*Math.PI),a.ctx.closePath(),a.ctx.fill(),++r>=a.itemsInRow?(r=0,o-=2*a.radius,i=a.radius):i+=2*a.radius},this.canvas=t,this.ctx=t.getContext("2d"),this.items=512,this.updateCanvasSizes(),window.addEventListener("resize",this.updateCanvasSizes),this.ignoreOnHigh=80,this.ignoreOnLow=4,t.style.backgroundImage=""},function e(t){var a=this;Object(c.a)(this,e),this.updateCanvasSizes=function(){a.canvas.width=a.canvas.clientWidth,a.canvas.height=a.canvas.clientHeight,a.WIDTH=a.canvas.width,a.HEIGHT=a.canvas.height,a.needUpdateSizes=!0},this.updateSizes=function(){a.barCount=a.WIDTH/(a.barWidth+a.offsetWidth)},this.draw=function(e){var t=e.length;a.needUpdateSizes&&a.updateSizes(),a.ctx.clearRect(0,0,a.WIDTH,a.HEIGHT);for(var n,i=a.barWidth,o=a.offsetWidth,r=a.barCount,c=Math.floor((t-(a.ignoreOnHigh+a.ignoreOnLow))/r),s=0,l=a.ignoreOnLow;l<t-a.ignoreOnHigh;l+=c)n=e[l]*(a.HEIGHT/256),a.ctx.fillStyle="rgb("+n+",50,"+l/t*355+")",a.ctx.fillRect(s,a.HEIGHT-n,i,n),s+=i+o},this.canvas=t,this.ctx=t.getContext("2d"),this.updateCanvasSizes(),window.addEventListener("resize",this.updateCanvasSizes),this.ignoreOnHigh=80,this.ignoreOnLow=4,this.barWidth=10,this.offsetWidth=2,this.barCount=0,t.style.backgroundImage="url(".concat(p.a,")")}],y=function(e){return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8224 6350",className:"mz-volume-icon-svg ".concat(e.type)},i.a.createElement("g",null,i.a.createElement("path",{id:"mz-v-i_max",d:"m7093,444c-105,-105 -275,-105 -379,0c-52,52 -79,121 -79,190c0,69 26,137 79,190c628,628 974,1463 974,2350c0,887 -346,1722 -974,2350c-105,105 -105,275 0,379c105,105 275,105 379,0c369,-369 654,-798 848,-1277c188,-462 283,-951 283,-1452c0,-501 -95,-990 -283,-1452c-194,-479 -480,-909 -848,-1277l0,-1z",fill:"#6c22c7"}),i.a.createElement("path",{id:"mz-v-i_mid",d:"m6202,1202c-105,-105 -275,-105 -379,0c-52,52 -79,121 -79,190c0,69 26,137 79,190c426,426 660,991 660,1592c0,601 -234,1167 -660,1592c-105,105 -105,275 0,379c105,105 275,105 379,0c527,-527 817,-1227 817,-1972c0,-744 -290,-1445 -817,-1972l0,1z",fill:"#9626a9"}),i.a.createElement("path",{id:"mz-v-i_low",d:"m5264,3173c0,266 -104,516 -292,705c-52,52 -79,121 -79,190c0,69 26,137 79,190c105,105 275,105 379,0c290,-290 449,-675 449,-1084c0,-409 -160,-794 -449,-1084c-105,-105 -275,-105 -379,0c-105,105 -105,274 0,379c188,188 292,439 292,705l0,-1z",fill:"#ca2c84"}),i.a.createElement("path",{d:"m3919,43l-2325,1612c-1,0 -2,0 -3,0l-1294,0c-163,0 -297,134 -297,297l0,2438c0,163 134,297 297,297l1288,0l2333,1618c134,93 244,36 244,-128l0,-6005c0,-106 -46,-167 -115,-172l-18,0c-33,2 -71,17 -111,44l1,-1z",fill:"#e92f6f"}),i.a.createElement("path",{id:"mz-v-i_mute",d:"m6992.731512,3189.719727l859,-859c64,-64 96,-146 98,-230l0,-12c-1,-83 -34,-166 -98,-230c-130,-130 -341,-130 -471,0l-859,859l-859,-859c-130,-130 -341,-130 -471,0c-130,130 -130,341 0,471l859,859l-859,859c-130,130 -130,341 0,471c65,65 150,98 236,98c85,0 171,-33 236,-98l859,-859l859,859c65,65 150,98 236,98c85,0 170,-33 236,-98c64,-64 96,-146 98,-230l0,-12c-1,-83 -34,-166 -98,-230l-859,-859l-2,2z",fill:"#451de2"})))},b=(a(25),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={value:100,iconType:"max",muted:!1,memVolume:100},a.onInputChange=function(e){var t=e.target.value;a.setVolume(t)},a.setVolume=function(e){var t=a.getIconType(e),n=(e/100).toFixed(2);a.props.onSetVolume(n),a.setState({value:e,iconType:t,muted:!1})},a.getIconType=function(e){return e>70?"max":e>30?"mid":e>0?"low":"zero"},a.muteHandler=function(){if(a.state.muted)return a.setVolume(a.state.value),void a.setState({muted:!1});a.setState({muted:!0,iconType:"muted"}),a.props.onSetVolume(0)},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return console.log("v-rendere"),i.a.createElement("div",{className:"mz-volume"},i.a.createElement("button",{className:"mz-volume-button",onClick:this.muteHandler},i.a.createElement(y,{type:this.state.iconType})),i.a.createElement("input",{className:"mz-volume-input",type:"range",onChange:this.onInputChange,value:this.state.value}))}}]),t}(n.PureComponent)),w=a(11),z=a.n(w),E=a(12),S=a.n(E),N=(a(26),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={actionAt:0,playing:!1,buffer:null,position:0,drawing:!1,loading:!1,loadingFileName:"DEMO: Lack Labour - Let Me [cut]",currentFileName:"",currentVizIndex:0,vizChanged:!1},a.getCanvasRef=function(e){a._canvasRef=e},a.createSourceNode=function(){a.state.buffer&&(a.sourceNode=a.audioCtx.createBufferSource(),a.sourceNode.connect(a.analyser),a.sourceNode.connect(a.gainNode),a.sourceNode.buffer=a.state.buffer)},a.defaultAudioPlay=function(){a.setState({loading:!0}),fetch(S.a).then(function(e){return e.blob()}).then(function(e){a.getArrayBuffer(e)}).catch(function(e){a.setState({loading:!1})})},a.fileDropHandler=function(e){e&&(a.setState({loading:!0}),a.getArrayBuffer(e))},a.parseFileName=function(e){return e.replace(/.mp3|.ogg|.aac|.wav|.ogg|.mpeg|.opus|.oga|.caf|.m4a|.mp4|.weba|.dolby|.flac/g,"")},a.getArrayBuffer=function(e){if(e.name){var t=a.parseFileName(e.name);a.setState({loadingFileName:t})}var n=new FileReader;n.onload=function(e){var t=e.target.result;a.loadTrackFromArrayBuffer(t)},n.readAsArrayBuffer(e)},a.loadTrackFromArrayBuffer=function(e){a.audioCtx.decodeAudioData(e,function(e){var t=!1;a.state.playing&&(t=!0),a.stopPlaying();var n=a.state.loadingFileName;a.setState({buffer:e,loading:!1,currentFileName:n,loadingFileName:""}),t&&a.startPlaying()},function(e){console.log(e),this.setState({loading:!1})})},a.startPlaying=function(e){if(a.createSourceNode(),a.sourceNode){var t="number"===typeof e?e:a.state.actionAt||0,n=a.audioCtx.currentTime-t;a.sourceNode.start(a.audioCtx.currentTime,t),a.draw(),a.setState({playing:!0,actionAt:n}),a.getPlayingPosition()}},a.pausePlaying=function(){var e=a.audioCtx.currentTime-a.state.actionAt;a.stopPlaying(e)},a.stopPlaying=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;a.sourceNode&&(a.sourceNode.disconnect(),a.sourceNode.stop(0),a.sourceNode=null),a.setState({playing:!1,actionAt:e,position:e})},a.getPlayingPosition=function(){if(a.state.playing){var e=a.audioCtx.currentTime-a.state.actionAt;e>=a.state.buffer.duration&&(e=a.state.buffer.duration,a.stopPlaying()),a.setState({position:e})}},a.setPositionOnTimeline=function(e){if(a.state.buffer){var t=e*a.state.buffer.duration;a.state.playing?(a.stopPlaying(),a.startPlaying(t)):a.stopPlaying(t)}},a.playHandler=function(){a.startPlaying()},a.pauseHandler=function(){a.pausePlaying()},a.stopHandler=function(){a.stopPlaying()},a.setVolume=function(e){a.gainNode.gain.value=e},a.changeVizualHandler=function(){var e=v.length,t=a.state.currentVizIndex;++t>=e&&(t=0),a.setState({currentVizIndex:t,vizChanged:!0})},a.draw=function(){if(!a.state.drawing){a.setState({drawing:!0});var e=a._canvasRef,t=new v[a.state.currentVizIndex](e);requestAnimationFrame(function n(){a.state.vizChanged&&(t=new v[a.state.currentVizIndex](e),a.setState({vizChanged:!1})),a.getPlayingPosition(),a.analyser.getByteFrequencyData(a.dataArray),t.draw(a.dataArray),a.state.playing?requestAnimationFrame(n):a.setState({drawing:!1})})}},a.audioCtx=new(window.AudioContext||window.webkitAudioContext),a.analyser=a.audioCtx.createAnalyser(),a.gainNode=a.audioCtx.createGain(),a.gainNode.connect(a.audioCtx.destination),a.analyser.fftSize=2048,a.bufferLength=a.analyser.frequencyBinCount,a.dataArray=new Uint8Array(a.bufferLength),a.sourceNode=null,a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.defaultAudioPlay()}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"mz-screen"},this.state.currentFileName?i.a.createElement("h2",{className:"mz-trackname"},this.state.currentFileName):null,i.a.createElement("canvas",{ref:this.getCanvasRef,width:2048,height:512,style:{backgroundImage:"url(".concat(p.a,")")},className:"mz-canvas"})),this.state.buffer?i.a.createElement(m,{position:this.state.position,duration:this.state.buffer.duration,onTimelineClick:this.setPositionOnTimeline}):i.a.createElement("div",{className:"mz-timeline-placeholder"}),i.a.createElement("div",{className:"mz-bottom"},this.state.buffer?i.a.createElement("div",{className:"mz-control-panel"},this.state.playing?i.a.createElement("button",{onClick:this.pauseHandler,className:"mz-controls mz-pause"}):i.a.createElement("button",{onClick:this.playHandler,className:"mz-controls mz-play"}),i.a.createElement("button",{onClick:this.stopHandler,className:"mz-controls mz-stop"}),i.a.createElement("button",{onClick:this.changeVizualHandler,className:"mz-change-visual"},i.a.createElement("img",{src:z.a,style:{width:"30px"},alt:""}))):null,this.state.loading?i.a.createElement("div",{className:"mz-loading"}):i.a.createElement(h,{onDrop:this.fileDropHandler})),i.a.createElement(b,{onSetVolume:this.setVolume}))}}]),t}(n.Component));a(27);var C=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[14,1,2]]]);
//# sourceMappingURL=main.7996a35d.chunk.js.map